---
layout: post
title: OCR ì—”ì§„ ê°œë°œê¸°
subtitle: feat. open source
tags: [MACHINE_LEARNING, DEVELOP]
cover-img: assets/img/OCR_cover.jpg
comments: true
mathjax: true
---

R&DíŒ€ì—ì„œ í˜„ì—…ì—ì„œ ì¼ì„ í•œì§€ë„ ë²Œì¨ 2ë…„ì„ ê½‰ ì±„ì› ìŠµë‹ˆë‹¤. ê·¸ë™ì•ˆ íšŒì‚¬ì—ì„œëŠ” íŠ¹íˆ OCR ê´€ë ¨ ì—…ë¬´ë¥¼ ì£¼ë¡œ ì§„í–‰í–ˆëŠ”ë°, ì•¼ì™¸ í™˜ê²½(text in the wild)ë¶€í„° ê³ ë¬¸ì„œê¹Œì§€ ë‹¤ì–‘í•œ í™˜ê²½ì— ëŒ€í•´ OCRì„ ì ìš©í•˜ëŠ” ê²½í—˜ì„ í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ìµœê·¼ì—ëŠ” ë‹¤ì–‘í•œ ì˜¤í”ˆ ì†ŒìŠ¤ ë ˆí¬ì§€í† ë¦¬ê°€ ê³µê°œë˜ì–´ìˆì–´ ë…¼ë¬¸ì„ ì½ìœ¼ë©´ ê±°ì˜ ê³§ì¥ ì‹¤í—˜ ë° ê²€ì¦ì„ í•  ìˆ˜ ìˆëŠ” ì½”ë“œë¡œ ì ‘ê·¼ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ê·¸ë™ì•ˆì˜ ê²½í—˜ ì¤‘, OCRì— í¥ë¯¸ë¥¼ ê°€ì§€ê³  ìƒˆë¡­ê²Œ ê³µë¶€í•´ë³´ê³ ì í•˜ê±°ë‚˜, ì—…ë¬´ì  í•„ìš”ì— ì˜í•´ ê°„ë‹¨í•œ OCR ì†”ë£¨ì…˜ì„ êµ¬í˜„í•´ë³´ë ¤ëŠ” ë¶„ë“¤ê»˜ ë„ì›€ì´ ë  ìˆ˜ ìˆì„ê¹Œ í•˜ì—¬ ì˜¤í”ˆì†ŒìŠ¤ ê¸°ë°˜ìœ¼ë¡œ OCR ì—”ì§„ì„ ì§ì ‘ ë§Œë“œëŠ” ê³¼ì •ì„ ì •ë¦¬í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.

*Githubì— [Toy project Repository](https://github.com/YongWookHa/Open-OCR-Engine)ë¥¼ ìƒì„±í–ˆìŠµë‹ˆë‹¤.*  

í•™ìŠµ ì „ë°˜ì€ Pytorch Lightningì„ ì´ìš©í•˜ì—¬ GPU, TPUë¥¼ ê°€ë¦¬ì§€ ì•Šë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. í•™ìŠµë°ì´í„° ìƒì„±ê³¼ ëª¨ë¸ í•™ìŠµ ë° ì„œë¹™ì„ ì§ì ‘ ìˆ˜í–‰í•˜ë©´ì„œ ëŒ€ëµì ì¸ OCR íë¦„ì„ íŒŒì•…í•˜ëŠ”ë° ë„ì›€ì´ ë˜ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.

## ğŸ” OCR (Optical Character Recognition) ?

OCRì˜ í•µì‹¬ ê¸°ëŠ¥ì¸ ë¬¸ì ê²€ì¶œ(Detection) ëª¨ë¸ê³¼ ë¬¸ì ì¸ì‹(Recognition) ëª¨ë¸ì„ ì–´ë–»ê²Œ í•™ìŠµí•˜ëŠëƒì— ë”°ë¼ End-to-End ë°©ë²• ë˜ëŠ” Ensemble ë°©ë²•ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì „ìì˜ ê²½ìš°ì—ëŠ” ë¬¸ì ê²€ì¶œ ëª¨ë¸ê³¼ ì¸ì‹ ëª¨ë¸ì„ ë™ì‹œì— í•™ìŠµí•˜ê³ , í›„ìì˜ ê²½ìš° ë³„ë„ í•™ìŠµí•˜ê²Œ ë©ë‹ˆë‹¤.  

[Google OCR ì„œë¹„ìŠ¤ ê´€ë ¨ ë…¼ë¬¸](https://das2018.cvl.tuwien.ac.at/media/filer_public/85/fd/85fd4698-040f-45f4-8fcc-56d66533b82d/das2018_short_papers.pdf#page=23)ì—ì„œ êµ¬ê¸€ì˜ web-based OCR ì„œë¹„ìŠ¤ êµ¬ì„±ì„ ì—¿ë³¼ ìˆ˜ ìˆëŠ”ë°, Googleì€ Ensemble ë°©ì‹ì„ ì´ìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.

![](https://www.dropbox.com/s/zjkvt6cm3pv2f7x/google_ocr_structure.jpg?raw=1)  
ë…¼ë¬¸ì— ì‹¤ë¦° Figureì— ë”°ë¥´ë©´, ê°€ì¥ ë¨¼ì € ì…ë ¥ ì´ë¯¸ì§€ì—ì„œ pixel-level heatmapìœ¼ë¡œ ë¬¸ìë¥¼ ê²€ì¶œ(Detection)í•˜ê³ , ë¬¸ìì˜ ë°©í–¥(Direction)ê³¼ ì¢…ë¥˜(Script) ë¶„ì„ ë‹¨ê³„ë¥¼ ê±°ì¹œ í›„ì— CNNìœ„ì— bi-LSTMì„ ë¶™ì—¬ì„œ ì¸ì‹(Recognition)ì„ ìˆ˜í–‰í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì§„í–‰ë©ë‹ˆë‹¤. ì‹¤ì œë¡œ End-to-End ëª¨ë¸ë³´ë‹¤ëŠ” Ensembleì´ ë” ì¢‹ì€ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆì„ ë¿ë§Œì•„ë‹ˆë¼ ê·¸ë¦¼ê³¼ ê°™ì´, ê²€ì¶œ ì´í›„ì— ë¬¸ì ë°©í–¥(Direction), ë¬¸ì ì¢…ë¥˜(Script) ì¸ì‹ ë“±, ì—¬ëŸ¬ê°€ì§€ ê²°ê³¼ ë³´ì¡° ìˆ˜ë‹¨ì„ ì¶”ê°€í•  ìˆ˜ ìˆì–´ ìœ ì—°í•œ ì†”ë£¨ì…˜ êµ¬ì¶•ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

## âš™ ì–´ë–¤ ëª¨ë¸ì„ ì“¸ê¹Œ?

NAVER ì‚°í•˜ì˜ ì¸ê³µì§€ëŠ¥ ì—°êµ¬ì†Œ, `Clova AI`ê°€ Githubì— ê³µê°œí•œ ëª¨ë¸ë“¤ì„ ì´ìš©í•˜ë©´ ê½¤ ë§Œì¡±ìŠ¤ëŸ¬ìš´ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì•„ë˜ì— ì†Œê°œë˜ëŠ” ë‘ê°€ì§€ ëª¨ë¸ì„ ì´ìš©í•  ì˜ˆì •ì…ë‹ˆë‹¤. í•¨ê»˜ ë§í¬ëœ ê³µì‹ Repositoryì— ë°©ë¬¸í•˜ë©´ ì½”ë“œì™€ Paperë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- Text Detection : [CRAFT-Text-Detector](https://github.com/clovaai/CRAFT-pytorch)  
    `CRAFT`ì˜ ê²½ìš° ëª¨ë¸ í•™ìŠµì„ ìœ„í•œ ì½”ë“œëŠ” ê³µì‹ ì œê³µí•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì§ì ‘ êµ¬ì¶•í•´ì•¼í•©ë‹ˆë‹¤. `CRAFT`ì˜ í•™ìŠµì„ ìœ„í•´ ê°„ë‹¨íˆ ì¸ì§€í•´ì•¼í•  ë°°ê²½ì§€ì‹ì´ ìˆìœ¼ë‹ˆ ì ì‹œ í™•ì¸í•©ì‹œë‹¤. ê¸°ì¡´ì— Text detectionì„ ëª©ì ìœ¼ë¡œ êµ¬ì¶•ëœ Open dataë“¤ì€ ëŒ€ë¶€ë¶„ Word ë‹¨ìœ„ë¡œ Labeling ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ëŒ€ë¶€ë¶„ì˜ Detection ëª¨ë¸ë“¤ì´ Word detectionì„ ëª©ì  Taskë¡œ í–ˆìŠµë‹ˆë‹¤. `CRAFT`ëŠ” ê¸°ì¡´ì˜ Word detection Taskë¥¼ Character detection taskë¡œ ë°”ë¼ë³´ëŠ” ë°©ë²•ìœ¼ë¡œ ë†’ì€ ì„±ëŠ¥ ê°œì„ ì„ ì´ë¤˜ìŠµë‹ˆë‹¤. ì´ ë§ì€ Word ë‹¨ìœ„ë¡œ ìƒì„±ëœ ë°ì´í„°ë¥¼ Character ë‹¨ìœ„ë¡œ ìª¼ê°œì•¼í•¨ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. Rule baseë¡œ í•™ìŠµ ë°ì´í„°ë¥¼ Character levelë¡œ ìˆ˜ì •í•´ì•¼í•˜ëŠ”ë°, ì´ ì½”ë“œëŠ” ê³µì‹ ê³µê°œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë‹¤ìŒ ë‹¨ë½ì—ì„œ êµ³ì´ ì´ ë°°ê²½ì§€ì‹ì— ëŒ€í•œ ì„¤ëª…ì„ í•˜ëŠ” ì´ìœ ë¥¼ ë³€ëª…í•˜ê² ìŠµë‹ˆë‹¤.  

    `CRAFT`ì˜ í•™ìŠµì—ëŠ” ë‘ê°€ì§€ ìŠ¤í…Œì´ì§€ê°€ ìˆìŠµë‹ˆë‹¤. Strong supervisionê³¼ Weak supervision ì…ë‹ˆë‹¤. Strongì˜ ê²½ìš° ì»´í“¨í„°ë¡œ ëœë”ë§í•œ ì¸ì¡°ì  ë°ì´í„°ë¥¼ ì´ìš©í•´ì„œ í™•ì‹¤í•œ(Strong) Ground truthë¥¼ ìƒì„±í•˜ì—¬ í•™ìŠµí•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. ìœ„ì—ì„œ ë§í•œ Word level dataì˜ Character levelí™”ê°€ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ì™€ ë‹¬ë¦¬ Weak supervisionì€ Word levelë¡œ êµ¬ì¶•ëœ ì‹¤ì œ ë°ì´í„°ë¥¼ Character levelë¡œ ë³€í™˜í•˜ì—¬ í™•ì‹¤í•˜ì§€ëŠ” ì•Šì€(Weak) Ground truthë¥¼ ì´ìš©í•´ì„œ í•™ìŠµí•©ë‹ˆë‹¤.  

    ìš°ë¦¬ê°€ í•™ìŠµí•  OCR-Engineì— ì†Œê°œëœ `CRAFT` ëª¨ë¸ì€ Strong supervision ë°©ì‹ë§Œì„ ì´ìš©í•©ë‹ˆë‹¤. ì´ ë¶€ë¶„ì„ ì‰½ê²Œ ë”°ë¼í•  ìˆ˜ ìˆë„ë¡ Reimplementí•´ì„œ ê³µìœ í•©ë‹ˆë‹¤. ëŒ€ì‹ , ì‹¤ì œ ë°ì´í„°ì—ì„œ ì¡°ê¸ˆ ë” ì˜ë¯¸ìˆëŠ” ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆê²Œí•˜ê¸° ìœ„í•´ ë‘ê°€ì§€ ì¢…ë¥˜ì˜ í•™ìŠµë°ì´í„°ë¥¼ ì´ìš©í•˜ê² ìŠµë‹ˆë‹¤.  

- Text Recognition : [deep-text-recognition-benchmark](https://github.com/clovaai/deep-text-recognition-benchmark)   
    `Deep-text-recognition-benchmark`ëŠ” ë§ê·¸ëŒ€ë¡œ, ìƒˆë¡œìš´ ëª¨ë¸ì˜ ì†Œê°œê°€ ì•„ë‹Œ, ê¸°ì¡´ ëª¨ë¸ë“¤ì˜ benchmarkì…ë‹ˆë‹¤. Text recognition ë¶„ì•¼ì—ì„œ ì¸ì •ë°›ëŠ” ì—¬ëŸ¬ê°€ì§€ ëª¨ë¸ë“¤ì„ ì¡°í•©í•´ì„œ ì‰½ê²Œ í•™ìŠµí•  ìˆ˜ ìˆë„ë¡ ë§Œë“¤ì–´ì§„ ë§¤ìš° ë©‹ì§„ Repositoryì…ë‹ˆë‹¤. í•™ìŠµ ë° í…ŒìŠ¤íŠ¸ ì½”ë“œê¹Œì§€ ì™„ì „ ê³µê°œë˜ì–´ ìˆê¸°ì—, ê°ì‚¬íˆ ì´ìš©í•  ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤.  

ìš°ë¦¬ê°€ ë§Œë“¤ì–´ë³¼ OCR ì—”ì§„ì€ ë§¤ìš° ë‹¨ìˆœí•œ êµ¬ì¡°ì…ë‹ˆë‹¤. Text detection ëª¨ë¸ ë’¤ì— Skew correctionì„ ë¶™ì´ê³  ê³§ë°”ë¡œ Text recognition ëª¨ë¸ì„ ì´ì–´ ë¶™ì´ëŠ” í˜•íƒœì…ë‹ˆë‹¤. í•™ìŠµ ê³¼ì •ì—ì„œëŠ” Text detectionì„ Stage 1ìœ¼ë¡œ ì§„í–‰í•˜ê³ , TPS(Thin Plate Spline)ë¼ëŠ” Deep learning ê¸°ë°˜ Skew correctionê³¼ Text recognitionì„ Stage 2ë¡œ í•™ìŠµí•©ë‹ˆë‹¤.  

![êµ¬ì¡° ê·¸ë¦¼](https://www.dropbox.com/s/yb49iw3my0ymzws/open-ocr-structure.jpg?raw=1)

## ğŸ§¬ í•™ìŠµ ë°ì´í„°

Repositoryì—ì„œëŠ” ì•„ë˜ ì´ë¯¸ì§€ì™€ ê°™ì´ ì‹ ë¬¸ê³¼ ìœ ì‚¬í•œ íšŒìƒ‰ ë…¸ì´ì¦ˆ ë°°ê²½ ìœ„ì— ê¸€ìë¥¼ ëœë”ë§í•˜ëŠ” ì†ŒìŠ¤ ì½”ë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤. Computer-generated dataë¥¼ ì´ìš©í•˜ë©´ ì •í™•í•œ Ground truthë¥¼ ì–»ì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ìœ„ì—ì„œ ì–¸ê¸‰í•œ Strong supervise learningì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

![](https://www.dropbox.com/s/m06dnj5m85y5zwy/generated_1.jpg?raw=1)  


## ğŸ‰ ì„œë¹™  
ëª¨ë¸ì˜ í•™ìŠµì„ ì™„ë£Œí•˜ê³  ë‚˜ë©´, ìœ„ì˜ êµ¬ì¡°ëŒ€ë¡œ ëª¨ë¸ì„ ì„œë¹™í•˜ëŠ” APIë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê° ëª¨ë¸ë“¤ì„ ì—°ê²°í•˜ì—¬ ìœ„ì˜ êµ¬ì¡°ë¡œ ê²°ê³¼ë¥¼ ë‚´ë†“ëŠ” OCR engineì„ Flaskë¥¼ ì´ìš©í•˜ì—¬ ë§¤ìš° ê°„ë‹¨í•˜ê²Œ APIí™” í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ APIë¥¼ ì‹¤í–‰í•˜ë©´, RESTful-APIë¥¼ í†µí•´ Request-Response í˜•ì‹ìœ¼ë¡œ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**[https://github.com/YongWookHa/Open-OCR-Engine](https://github.com/YongWookHa/Open-OCR-Engine)**

> OCR-Engineì„ ê°œì„ í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ë§ì´ ìˆìŠµë‹ˆë‹¤. ì¢‹ì€ ì•„ì´ë””ì–´ë¥¼ ê°€ì§€ê³  ê³„ì‹œë‹¤ë©´ issueì— ë‚¨ê²¨ì£¼ì‹œê³ , í•¨ê»˜ ë§Œë“¤ì–´ê°€ë©´ ë” ì—†ì´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.


## ğŸ”— Reference 
- What Is Wrong With Scene Text Recognition Model Comparisons? Dataset and Model Analysis : [https://arxiv.org/abs/1904.01906](https://arxiv.org/abs/1904.01906)
- Character Region Awareness for Text Detection : [https://arxiv.org/abs/1904.01941](https://arxiv.org/abs/1904.01941)